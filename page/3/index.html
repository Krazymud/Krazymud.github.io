<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.1.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Eadric的博客">
<meta property="og:type" content="website">
<meta property="og:title" content="EadBlog">
<meta property="og:url" content="http://Krazymud.github.io/page/3/index.html">
<meta property="og:site_name" content="EadBlog">
<meta property="og:description" content="Eadric的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="EadBlog">
<meta name="twitter:description" content="Eadric的博客">





  
  
  <link rel="canonical" href="http://Krazymud.github.io/page/3/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>EadBlog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">EadBlog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Hakuna, matata</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br/>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br/>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br/>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br/>归档</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/10/11/leetcode841/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/11/leetcode841/" class="post-title-link" itemprop="url">leetcode 841 KeysAndRooms 题解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-11 13:24:38 / 修改时间：13:34:40" itemprop="dateCreated datePublished" datetime="2018-10-11T13:24:38+08:00">2018-10-11</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>There are <code>N</code> rooms and you start in room <code>0</code>.  Each room has a distinct number in <code>0, 1, 2, ..., N-1</code>, and each room may have some keys to access the next room. </p>
<p>Formally, each room <code>i</code> has a list of keys <code>rooms[i]</code>, and each key <code>rooms[i][j]</code> is an integer in <code>[0, 1, ..., N-1]</code>where <code>N = rooms.length</code>.  A key <code>rooms[i][j] = v</code> opens the room with number <code>v</code>.</p>
<p>Initially, all the rooms start locked (except for room <code>0</code>). </p>
<p>You can walk back and forth between rooms freely.</p>
<p>Return <code>true</code> if and only if you can enter every room.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Input: [[<span class="number">1</span>],[<span class="number">2</span>],[<span class="number">3</span>],[]]</span><br><span class="line">Output: <span class="literal">true</span></span><br><span class="line">Explanation:  </span><br><span class="line">We start <span class="keyword">in</span> <span class="built_in">room</span> <span class="number">0</span>, <span class="keyword">and</span> pick up <span class="built_in">key</span> <span class="number">1</span>.</span><br><span class="line">We <span class="keyword">then</span> <span class="built_in">go</span> to <span class="built_in">room</span> <span class="number">1</span>, <span class="keyword">and</span> pick up <span class="built_in">key</span> <span class="number">2</span>.</span><br><span class="line">We <span class="keyword">then</span> <span class="built_in">go</span> to <span class="built_in">room</span> <span class="number">2</span>, <span class="keyword">and</span> pick up <span class="built_in">key</span> <span class="number">3</span>.</span><br><span class="line">We <span class="keyword">then</span> <span class="built_in">go</span> to <span class="built_in">room</span> <span class="number">3</span>.  Since we were able to <span class="built_in">go</span> to <span class="built_in">every</span> <span class="built_in">room</span>, we <span class="built_in">return</span> <span class="literal">true</span>.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="comment">[<span class="comment">[1,3]</span>,<span class="comment">[3,0,1]</span>,<span class="comment">[2]</span>,<span class="comment">[0]</span>]</span></span><br><span class="line">Output: false</span><br><span class="line">Explanation: We can't enter the <span class="keyword">room</span> with number 2.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li><code>1 &lt;= rooms.length &lt;= 1000</code></li>
<li><code>0 &lt;= rooms[i].length &lt;= 1000</code></li>
<li>The number of keys in all rooms combined is at most <code>3000</code>.</li>
</ol>
<h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>总的来说，就是数组的每个位是一个房间，房间中存有通往其他房间的钥匙，从0号房间开始，问是否能走完全部房间。于是马上想到了BFS算法，只要最后所有位置都visit过，就能够走完所有房间。</p>
<p>代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">canVisitAllRooms</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; rooms)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; visited(rooms.size(), <span class="number">0</span>);	<span class="comment">//已到过的房间</span></span><br><span class="line">    <span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; tovisit;		<span class="comment">//将要去的房间</span></span><br><span class="line">    tovisit.push(<span class="number">0</span>);</span><br><span class="line">    visited[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(!tovisit.empty())&#123;</span><br><span class="line">        <span class="keyword">int</span> curr = tovisit.front();</span><br><span class="line">        tovisit.pop();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> r : rooms[curr])&#123;</span><br><span class="line">            <span class="keyword">if</span>(!visited[r])&#123;</span><br><span class="line">                tovisit.push(r);</span><br><span class="line">                visited[r] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rooms.size(); i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!visited[i])&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/10/06/leetcode877/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/10/06/leetcode877/" class="post-title-link" itemprop="url">leetcode 877 Stone Game 题解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-10-06 13:47:17 / 修改时间：14:01:06" itemprop="dateCreated datePublished" datetime="2018-10-06T13:47:17+08:00">2018-10-06</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>国庆长假，水一题</p>
<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>Alex and Lee play a game with piles of stones.  There are an even number of piles <strong>arranged in a row</strong>, and each pile has a positive integer number of stones <code>piles[i]</code>.</p>
<p>The objective of the game is to end with the most stones.  The total number of stones is odd, so there are no ties.</p>
<p>Alex and Lee take turns, with Alex starting first.  Each turn, a player takes the entire pile of stones from either the beginning or the end of the row.  This continues until there are no more piles left, at which point the person with the most stones wins.</p>
<p>Assuming Alex and Lee play optimally, return <code>True</code> if and only if Alex wins the game.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input: [<span class="number">5</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">Output: <span class="literal">true</span></span><br><span class="line">Explanation: </span><br><span class="line">Alex starts <span class="keyword">first</span>, <span class="keyword">and</span> can only take <span class="keyword">the</span> <span class="keyword">first</span> <span class="number">5</span> <span class="keyword">or</span> <span class="keyword">the</span> <span class="keyword">last</span> <span class="number">5.</span></span><br><span class="line">Say he takes <span class="keyword">the</span> <span class="keyword">first</span> <span class="number">5</span>, so that <span class="keyword">the</span> row becomes [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].</span><br><span class="line">If Lee takes <span class="number">3</span>, <span class="keyword">then</span> <span class="keyword">the</span> board is [<span class="number">4</span>, <span class="number">5</span>], <span class="keyword">and</span> Alex takes <span class="number">5</span> <span class="built_in">to</span> win <span class="keyword">with</span> <span class="number">10</span> points.</span><br><span class="line">If Lee takes <span class="keyword">the</span> <span class="keyword">last</span> <span class="number">5</span>, <span class="keyword">then</span> <span class="keyword">the</span> board is [<span class="number">3</span>, <span class="number">4</span>], <span class="keyword">and</span> Alex takes <span class="number">4</span> <span class="built_in">to</span> win <span class="keyword">with</span> <span class="number">9</span> points.</span><br><span class="line">This demonstrated that taking <span class="keyword">the</span> <span class="keyword">first</span> <span class="number">5</span> was <span class="keyword">a</span> winning move <span class="keyword">for</span> Alex, so we <span class="literal">return</span> <span class="literal">true</span>.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li><code>2 &lt;= piles.length &lt;= 500</code></li>
<li><code>piles.length</code> is even.</li>
<li><code>1 &lt;= piles[i] &lt;= 500</code></li>
<li><code>sum(piles)</code> is odd.</li>
</ol>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p>第一种解法是使用动态规划，注意到每次Alex和Lee的操作都是从piles的头或尾取走一个最大的数，那么就可以把问题分解到多个子问题上分别来解决。</p>
<p>先构建一个数组存储piles的备份，以及一个二维数组存储各个子问题的解：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dparr;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; p;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">stoneGame</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; piles)</span> </span>&#123;</span><br><span class="line">    p = piles;</span><br><span class="line">    <span class="keyword">int</span> size = piles.size();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; tmp(size, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(size, <span class="number">0</span>));</span><br><span class="line">    dparr = tmp;</span><br><span class="line">    <span class="keyword">return</span> dp(<span class="number">0</span>, size - <span class="number">1</span>) &gt; <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是dp的具体实现，这里将Lee的操作视为从Alex的得分中扣除，最后只要Alex的得分大于零则Alex胜利：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dp</span><span class="params">(<span class="keyword">int</span> low, <span class="keyword">int</span> high)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(low == high)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(dparr[low][high] != <span class="number">0</span>)&#123;	<span class="comment">//避免重复计算</span></span><br><span class="line">        <span class="keyword">return</span> dparr[low][high];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>((high - low + <span class="number">1</span>) % <span class="number">2</span> == <span class="number">0</span>)&#123;  <span class="comment">//Alex</span></span><br><span class="line">        res = max(dp(low + <span class="number">1</span>, high) + p[low], dp(low, high - <span class="number">1</span>) + p[high]);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span>&#123;	<span class="comment">//Lee</span></span><br><span class="line">        res = min(dp(low + <span class="number">1</span>, high) - p[low], dp(low, high - <span class="number">1</span>) - p[high]);</span><br><span class="line">    &#125;</span><br><span class="line">    dparr[low][high] = res;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>让我们回到问题：数组中一共有偶数个元素，Alex先选，Lee后选。那么假设数组有2n个元素，如果Alex第一次选择了元素1，则Lee可以选择2或2n，在之后Alex可以选择3、2n或者2、2n-1，以此类推。也就是说，可以保证Alex一定能够选到所有奇数位置的元素或是所有偶数位置的元素，那么只要一开始知道奇数位置元素之和与偶数位置元素之和哪个更大，就能保证Alex胜利，所以实际上这道题我们只需要：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br></pre></td></tr></table></figure>
<p>就能够通过。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/27/leetcode847/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/27/leetcode847/" class="post-title-link" itemprop="url">leetcode 847 访问所有节点的最短路径 题解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-27 22:57:50" itemprop="dateCreated datePublished" datetime="2018-09-27T22:57:50+08:00">2018-09-27</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-28 00:53:09" itemprop="dateModified" datetime="2018-09-28T00:53:09+08:00">2018-09-28</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>An undirected, connected graph of N nodes (labeled <code>0, 1, 2, ..., N-1</code>) is given as <code>graph</code>.</p>
<p><code>graph.length = N</code>, and <code>j != i</code> is in the list <code>graph[i]</code> exactly once, if and only if nodes <code>i</code> and <code>j</code> are connected.</p>
<p>Return the length of the shortest path that visits every node. You may start and stop at any node, you may revisit nodes multiple times, and you may reuse edges.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="comment">[<span class="comment">[1,2,3]</span>,<span class="comment">[0]</span>,<span class="comment">[0]</span>,<span class="comment">[0]</span>]</span></span><br><span class="line">Output: 4</span><br><span class="line">Explanation: One possible path <span class="keyword">is</span> <span class="comment">[1,0,2,0,3]</span></span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="comment">[<span class="comment">[1]</span>,<span class="comment">[0,2,4]</span>,<span class="comment">[1,3,4]</span>,<span class="comment">[2]</span>,<span class="comment">[1,2]</span>]</span></span><br><span class="line">Output: 4</span><br><span class="line">Explanation: One possible path <span class="keyword">is</span> <span class="comment">[0,1,4,2,3]</span></span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li><code>1 &lt;= graph.length &lt;= 12</code></li>
<li><code>0 &lt;= graph[i].length &lt; graph.length</code></li>
</ol>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p>这周刚好学到了BFS、Dijkstra、Bellman–Ford等处理图论问题的算法，这里就能够用上了。这一题是要在无向图中找到经过了每一个节点的最短路径，可以很快想到可以用BFS算法，但是再一想，BFS算法可以用来找两点间最短路径，而这里并没有给出起点和终点，只是单纯的找到一条经过每个节点的最短路径，怎么办呢？</p>
<p>以往使用BFS算法时，是将节点不断加入、弹出队列，在这里我们可以换种思路，比如把从各个节点开始的路径加入、更新、弹出队列，并记录此时路径对应的长度，直到队列为空时，此时经过了所有节点的路径的长度应该被更新了许多次，达到了最小。</p>
<p>首先需要构建一个struct类型，代表此时的路径状态：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">state</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> visited, tovisit;	<span class="comment">//已经过的节点，要访问的节点</span></span><br><span class="line">    state(<span class="keyword">int</span> v, <span class="keyword">int</span> t)&#123;</span><br><span class="line">        visited = v;</span><br><span class="line">        tovisit = t;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>用bits来记录经过的节点：从第n号节点开始即为<code>1 &lt;&lt; n = 1...00</code>（n个0），访问完所有节点的路径状态应该是<code>011..1</code>，哪一位为1即代表经过了哪一位，访问节点的邻居后的节点状态这样表示：<code>visited | (1 &lt;&lt; neighbour)</code>。</p>
<p>接下来是实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shortestPathLength</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; graph)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = graph.size();</span><br><span class="line">    <span class="built_in">queue</span>&lt;state&gt; mqueue;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dist(<span class="number">1</span> &lt;&lt; n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, n * n));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        mqueue.push(state(<span class="number">1</span> &lt;&lt; i, i));	<span class="comment">//queue中一开始设置各个节点开始的初始路径</span></span><br><span class="line">        dist[<span class="number">1</span> &lt;&lt; i][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!mqueue.empty())&#123;</span><br><span class="line">        state node = mqueue.front();</span><br><span class="line">        mqueue.pop();</span><br><span class="line">        <span class="keyword">int</span> dis = dist[node.visited][node.tovisit];</span><br><span class="line">        <span class="keyword">if</span>(node.visited == (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>) <span class="keyword">return</span> dis;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> neighbour : graph[node.tovisit])&#123;	<span class="comment">//通过graph访问节点邻居</span></span><br><span class="line">            <span class="keyword">int</span> visited2 = node.visited | (<span class="number">1</span> &lt;&lt; neighbour);</span><br><span class="line">            <span class="keyword">if</span>(dis + <span class="number">1</span> &lt; dist[visited2][neighbour])&#123;	<span class="comment">//路径更短则更新</span></span><br><span class="line">                dist[visited2][neighbour] = dis + <span class="number">1</span>;</span><br><span class="line">                mqueue.push(state(visited2, neighbour));	<span class="comment">//更新后的路径状态再加入queue</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比较难想到的地方就是对路径状态进行BFS。</p>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>通过官方solution发现了第二种使用了Dynamic Programming的解法，大体上其实和BFS差不多，都是对路径状态进行操作。</p>
<p>解法如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">shortestPathLength</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; graph)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = graph.size();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; dist(<span class="number">1</span> &lt;&lt; n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n, n * n));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        dist[<span class="number">1</span> &lt;&lt; i][i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> visited = <span class="number">0</span>; visited &lt; <span class="number">1</span> &lt;&lt; n; ++visited)&#123;</span><br><span class="line">        <span class="keyword">bool</span> repeat = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">while</span>(repeat)&#123;</span><br><span class="line">            repeat = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> tovisit = <span class="number">0</span>; tovisit &lt; n; ++tovisit)&#123;</span><br><span class="line">                <span class="keyword">int</span> dis = dist[visited][tovisit];</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> neighbour : graph[tovisit])&#123;</span><br><span class="line">                    <span class="keyword">int</span> visited2 = visited | (<span class="number">1</span> &lt;&lt; neighbour);</span><br><span class="line">                    <span class="keyword">if</span>(dis + <span class="number">1</span> &lt; dist[visited2][neighbour])&#123;</span><br><span class="line">                        dist[visited2][neighbour] = dis + <span class="number">1</span>;</span><br><span class="line">                        <span class="keyword">if</span>(visited2 == visited) repeat = <span class="literal">true</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> ans = n * n;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i : dist[(<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>])&#123;</span><br><span class="line">        ans = min(i, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，这种解法是通过多重循环，对dist中每一种路径状态进行更新，最后取都是经过每个节点的路径中最短的一条。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/26/go-env/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/26/go-env/" class="post-title-link" itemprop="url">CentOS下GO开发环境安装与配置</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-26 23:10:04" itemprop="dateCreated datePublished" datetime="2018-09-26T23:10:04+08:00">2018-09-26</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-27 13:16:36" itemprop="dateModified" datetime="2018-09-27T13:16:36+08:00">2018-09-27</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>在<a href="https://krazymud.github.io/2018/09/09/vbox-cfg/">Win10环境下安装配置VirtualBox，搭建CentOS私有云</a>一节中我们已经成功的配置好了虚拟机上的CentOS私有云，今天就来研究一下GO的开发环境的安装与配置。</p>
<h2 id="安装、配置步骤"><a href="#安装、配置步骤" class="headerlink" title="安装、配置步骤"></a>安装、配置步骤</h2><h3 id="1-安装golang"><a href="#1-安装golang" class="headerlink" title="1. 安装golang"></a>1. 安装golang</h3><p>可以选择在<a href="https://golang.org/dl/" target="_blank" rel="noopener">官方下载页</a>处找到最新的版本来下载安装，这里省事起见选择了直接用系统包管理工具安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudo yum install golang</span></span><br></pre></td></tr></table></figure>
<p>安装完后调用<code>go version</code>命令查看版本号，这里安装的是go 1.9.4</p>
<p>查看go都安装在了哪里：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> rpm -ql golang</span></span><br></pre></td></tr></table></figure>
<h3 id="2-配置golang环境"><a href="#2-配置golang环境" class="headerlink" title="2. 配置golang环境"></a>2. 配置golang环境</h3><p>go工具为公共代码仓库中维护的开源代码而设计，用go所编写的代码必须放在<strong>工作空间</strong>内，它包含三个子目录：</p>
<ul>
<li>src目录包含Go的源文件，它们被组织成包（一个目录对应一个包），是运行<code>go install</code>、<code>go run</code>等命令时的当前路径</li>
<li>pkg目录包含包对象（golang编译的.a中间文件）</li>
<li>bin目录包含可执行文件</li>
</ul>
<p>创建工作空间目录并设置GOPATH：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> mkdir <span class="variable">$HOME</span>/gowork</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> GOPATH=<span class="variable">$HOME</span>/work</span></span><br></pre></td></tr></table></figure>
<p>并将工作空间中的bin目录添加到PATH中，以便以后直接运行安装的go程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GOPATH</span>/bin</span></span><br></pre></td></tr></table></figure>
<p>最后使这些配置生效：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> <span class="variable">$HOME</span>/.profile</span></span><br></pre></td></tr></table></figure>
<p>检查配置可以通过：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> go env</span></span><br></pre></td></tr></table></figure>
<h3 id="3-安装vscode编辑器与其他"><a href="#3-安装vscode编辑器与其他" class="headerlink" title="3. 安装vscode编辑器与其他"></a>3. 安装vscode编辑器与其他</h3><p><strong>vscode安装</strong></p>
<p>在开始愉快的用go玩耍前还需要安装一款适合你的编辑器，这里选择的是vscode，巨硬大法好嘛。</p>
<p>在<a href="https://code.visualstudio.com/docs/setup" target="_blank" rel="noopener">官方教程</a>中有展示各个平台的安装流程，在CentOS平台上的安装命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo sh -c <span class="string">'echo -e "[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" &gt; /etc/yum.repos.d/vscode.repo'</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum check-update	//检查更新</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sudo yum install code</span></span><br></pre></td></tr></table></figure>
<p><strong>git安装</strong></p>
<p>打开vscode后如果你没有安装git那么它会提醒你安装，如果你之前使用<code>yum</code>命令安装过的话它会提醒你版本太老（CentOS下），所以这里选择手动安装最新版本的git。</p>
<p>首先安装一些后续需要的依赖包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum install curl-devel expat-devel gettext-devel openssl-devel zlib-devel</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> yum install  gcc perl-ExtUtils-MakeMaker</span></span><br></pre></td></tr></table></figure>
<p>接着如果之前有装过旧版本的话需要卸载：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum remove git</span></span><br></pre></td></tr></table></figure>
<p>然后wget下载官方最新版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> wget https://www.kernel.org/pub/software/scm/git/git-2.9.2.tar.gz</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar -zxvf git-2.9.2.tar.gz</span></span><br></pre></td></tr></table></figure>
<p>最后，编译安装，配置环境：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">cd</span> git-2.9.2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make prefix=/usr/<span class="built_in">local</span>/git all</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> make prefix=/usr/<span class="built_in">local</span>/git install</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"export PATH=<span class="variable">$PATH</span>:/usr/local/git/bin"</span> &gt;&gt; /etc/bashrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/bashrc</span></span><br></pre></td></tr></table></figure>
<p>如果安装出错，应该是还有什么依赖没有安装好，根据提示手动安装就可以。</p>
<p>检查git版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> git version</span></span><br><span class="line">git version 2.9.2</span><br></pre></td></tr></table></figure>
<p><strong>注意：如果安装完查看版本不是我们安装的最新版，请重新执行下面的操作</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> yum remove -y git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">source</span> /etc/bashrc</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git --version</span></span><br></pre></td></tr></table></figure>
<p><strong>工具包安装</strong></p>
<p>现在总能够开始写go了吧？在vscode创建一个hello.go刚写了条package就发现又报错了，原来是很多golang的tools没有安装，根据vscode的提示一键安装，然而<a href="https://golang.org" target="_blank" rel="noopener">golang.org</a>并不能连上，于是，这一步也要我们手动安装。</p>
<p>首先在go工作空间的src目录下建立一个golang.org文件夹，在其中再建立一个x文件夹，cd切换到x文件夹下，下载插件包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/golang/tools.git tools</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/golang/lint.git lint</span></span><br></pre></td></tr></table></figure>
<p>执行完毕后，在x文件夹下会多两个文件夹tools和lint。</p>
<p>最后执行安装命令，安装在vscode中没有安装的工具包，例如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> go install golang.org/x/tools/cmd/guru</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> go install golang.org/x/tools/cmd/gorename</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> go install golang.org/x/tools/cmd/gorename</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> go install golang.org\x\lint\golint</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>配置成功！接下来可以使用vs code创建hello.go测试一下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Printf(<span class="string">"hello, world\n"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在终端运行！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> go run hello.go</span></span><br><span class="line">hello, world</span><br></pre></td></tr></table></figure>
<h3 id="4-绑定远程仓库"><a href="#4-绑定远程仓库" class="headerlink" title="4. 绑定远程仓库"></a>4. 绑定远程仓库</h3><p>现在你的go工作空间的架构应该类似这样：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bin/</span><br><span class="line">	...                         # 可执行命令</span><br><span class="line">pkg/</span><br><span class="line">	linux_amd64/</span><br><span class="line">		...						# 包对象</span><br><span class="line">src/							#源码</span><br><span class="line">	github.com/</span><br><span class="line">		...</span><br><span class="line">	golang.org/</span><br><span class="line">		...</span><br></pre></td></tr></table></figure>
<p>此时需要在github.com文件夹下创建一个和你自己github账号名称一样的文件夹，这个文件夹作为以后与远程库同步的存放go代码的文件夹，在这个文件夹下可以创建各种包。</p>
<p>在你的github账号上手动创建一个远程库，之后根据提示，在本地文件夹中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"# xxx"</span> &gt;&gt; README.md</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git init</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git add README.md</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git commit -m <span class="string">"first commit"</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git remote add origin https://github.com/username/xxx.git</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> git push -u origin master</span></span><br></pre></td></tr></table></figure>
<p>之后每次git add、commit后要push时，都要输入自己的账号、密码来操作。当然也可以选择用git ssh，这里就不介绍了。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/22/blockchain/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/22/blockchain/" class="post-title-link" itemprop="url">初步认识区块链</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-22 23:00:35 / 修改时间：23:02:02" itemprop="dateCreated datePublished" datetime="2018-09-22T23:00:35+08:00">2018-09-22</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自中本聪在2008年于《比特币白皮书》中提出“区块链”概念，并在2009年开发第一个区块即“创世区块”起，十年的时间过去了。在这十年的时间中，区块链技术已有长足的发展，开始初步的进入应用领域、大众视野。而同时，它也面临着许多挑战，这些挑战亟待更多的人来研究、解决。</p>
<p>区块链是借由密码学串接并保护内容的串联交易记录（区块），每个区块包含着前一个区块的加密散列、相应时间戳以及交易数据。它的优点都基于其去中心化的特点，得以在节点无需互相信任的分布式系统中实现基于去中心化信用的点对点交易、协调与协作。举例来说，在现有的中心化信用系统中，交易行为都要通过某个中心化的机构来认证，而在区块链中，认证不是由某一个中心机构进行的，而是记录在每个节点上，是透明化、可追溯的。这样就为解决中心化机构普遍存在的高成本、低效率以及数据存储不安全等问题提供了解决方案。</p>
<p>在优点之外，区块链也面临着许多问题与挑战，这里介绍其中的一部分：</p>
<ol>
<li>人才匮乏。目前来说，尽管相应的技术与产业发展的很快，但相关学术研究严重滞后。技术创新缺乏理论支持必然走不远，所以相关领域亟待学术跟进。</li>
<li>监管问题。以区块链这种去中心化技术搭建的交易平台，在交易过程中，参与者的身份都是匿名的，这就和传统的交易平台完全不同了，传统的监管方式也无法再使用。因此，目前比特币的交易市场中充斥着洗钱、黑市交易的犯罪活动，这些行为如何监管也是需要在未来解决的问题。</li>
<li>安全问题，这也是区块链迄今为止面临的最重要的问题，如基于PoW共识过程的区块链面临的51%攻击问题，和基于PoS共识过程的区块链面临的N@S攻击问题，更为安全有效的共识机制还需要人们的研究和设计。</li>
<li>效率。目前完全同步自创世区块至今的区块数据需要大于60gb的存储空间，而这个数字还在持续增加中，即使是部分节点采用轻量化方案，还是不能完全解决此问题。同时，区块链的交易效率非常低，比特币区块链目前每秒仅能处理七笔交易，这就限制了区块链在大多数金融系统高额交易场景中的应用。最后，它的交易确认时间一般为十分钟左右（区块的生成时间），这在小额交易和时间敏感交易中是不可忍受的。</li>
</ol>
<p>区块链的技术应用可分为三个阶段：</p>
<ul>
<li>区块链1.0模式：以可编程数字加密货币体系为主要特征。加密货币以比特币、莱特币为代表，具有支付、流通的货币职能。</li>
<li>区块链2.0模式：以可编程金融系统为主要特征。是对金融领域的使用场景和流程进行梳理、优化的应用阶段，以以太坊、瑞波币等为代表的智能合约在这一阶段。</li>
<li>区块链3.0模式：以可编程社会为主要特征，是区块链技术在社会各个领域下的应用场景实现。</li>
</ul>
<p>需要注意的是，这三个模式并不是演进式发展的，而是并行发展的，在区块链2.0乃至3.0已开始发展的背景下，区块链1.0模式的数字加密货币体系实际上仍远未成熟，还有很长的路要走。</p>
<p>目前部分区块链的项目已初步有了一些简单的应用场景，如通过以太坊网络、BTS平台等发行一些基于区块链技术的项目，但是数量还远远不够，覆盖的应用方向也很少。可以说人们通过比特币认识了区块链，但是区块链技术不仅能够应用于数字加密货币领域，它在数据存储、鉴证，金融交易，资产管理和选举投票等方面都有广大的应用前景。总的来说，区块链技术目前还在积累阶段，它的潜力是巨大的，也许，在未来它不仅能改变我们的交易方式，还能深入的影响我们社会的方方面面，甚至，改变整个社会。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/19/leetcode765+778/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/19/leetcode765+778/" class="post-title-link" itemprop="url">leetcode 765+778 题解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-19 20:47:23 / 修改时间：23:06:12" itemprop="dateCreated datePublished" datetime="2018-09-19T20:47:23+08:00">2018-09-19</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这周因为两道题目都只想到了一种解法，所以写在一起。</p>
<h2 id="1-Swim-In-Rising-Water"><a href="#1-Swim-In-Rising-Water" class="headerlink" title="1. Swim In Rising Water"></a>1. Swim In Rising Water</h2><p>On an N x N <code>grid</code>, each square <code>grid[i][j]</code> represents the elevation at that point <code>(i,j)</code>.</p>
<p>Now rain starts to fall. At time <code>t</code>, the depth of the water everywhere is <code>t</code>. You can swim from a square to another 4-directionally adjacent square if and only if the elevation of both squares individually are at most <code>t</code>. You can swim infinite distance in zero time. Of course, you must stay within the boundaries of the grid during your swim.</p>
<p>You start at the top left square <code>(0, 0)</code>. What is the least time until you can reach the bottom right square <code>(N-1, N-1)</code>?</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="string">[[0,2],[1,3]]</span></span><br><span class="line">Output: <span class="number">3</span></span><br><span class="line">Explanation:</span><br><span class="line">At <span class="built_in">time</span> <span class="number">0</span>, you are <span class="keyword">in</span> grid location (<span class="number">0</span>, <span class="number">0</span>).</span><br><span class="line">You cannot go anywhere <span class="keyword">else</span> because <span class="number">4</span>-directionally adjacent neighbors have a higher elevation than t = <span class="number">0.</span></span><br><span class="line"></span><br><span class="line">You cannot reach point (<span class="number">1</span>, <span class="number">1</span>) <span class="keyword">until</span> <span class="built_in">time</span> <span class="number">3.</span></span><br><span class="line">When the depth of water is <span class="number">3</span>, we can swim anywhere inside the grid.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Input: [[0,1,2,3,4],[24,23,22,21,5],[12,13,14,15,16],[11,17,18,19,20],[10,9,8,7,6]]</span><br><span class="line">Output: 16</span><br><span class="line">Explanation:</span><br><span class="line"><span class="number"> 0 </span><span class="number"> 1 </span><span class="number"> 2 </span><span class="number"> 3 </span> 4</span><br><span class="line">24<span class="number"> 23 </span>22<span class="number"> 21 </span> 5</span><br><span class="line">12<span class="number"> 13 </span>14<span class="number"> 15 </span>16</span><br><span class="line">11<span class="number"> 17 </span>18<span class="number"> 19 </span>20</span><br><span class="line">10 <span class="number"> 9 </span><span class="number"> 8 </span><span class="number"> 7 </span> 6</span><br><span class="line"></span><br><span class="line">The final route is marked in bold.</span><br><span class="line">We need to wait until time<span class="number"> 16 </span>so that (0, 0) and (4, 4) are connected.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li><code>2 &lt;= N &lt;= 50</code>.</li>
<li>grid[i][j] is a permutation of [0, …, N*N - 1].</li>
</ol>
<h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>这道题的意思是，在t时刻，海拔为t，而n*n的二维矩阵的每个数值都代表了一处的海拔，从一点游到另一点的条件是两处的海拔（值）都大于等于t，要求求出从（0，0）到（n-1，n-1）的最小时间。也就是一个搜索节点的问题，可以用bfs即广度优先搜索的思路来做。</p>
<p>在寻找足够大的t时，我用二分法来实现，这样又可以节约不少时间：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">swimInWater</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = grid.size(), st = grid[<span class="number">0</span>][<span class="number">0</span>], ed = n * n - <span class="number">1</span>, t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(st &lt; ed)&#123;</span><br><span class="line">        t = (st + ed) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span>(swim(grid, t))&#123;	<span class="comment">//判断t时能否到达终点</span></span><br><span class="line">            ed = t;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> st = t + (st + ed) % <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> st;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>真正的实现函数里，bfs用一个queue来实现，还要一个二维vector来记录已经到过的节点。然后就是每次把和节点相邻的未经过的节点（且是数值小于等于t的）加入bfs，并把现有节点pop出去，看能否在bfs为空之前找到终点。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">swim</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; grid, <span class="keyword">int</span> t)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = grid.size();</span><br><span class="line">    <span class="built_in">queue</span>&lt;pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt;&gt; bfs;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; visited(n, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;(n));</span><br><span class="line">    <span class="keyword">int</span> dir[<span class="number">4</span>][<span class="number">2</span>] = &#123;&#123;<span class="number">0</span>, <span class="number">1</span>&#125;, &#123;<span class="number">0</span>, <span class="number">-1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;, &#123;<span class="number">-1</span>, <span class="number">0</span>&#125;&#125;;	<span class="comment">//右左下上</span></span><br><span class="line">    bfs.emplace(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    visited[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(bfs.size())&#123;</span><br><span class="line">        <span class="keyword">int</span> x = bfs.front().first, y = bfs.front().second;</span><br><span class="line">        bfs.pop();</span><br><span class="line">        <span class="keyword">if</span>(grid[x][y] &lt;= t)&#123;</span><br><span class="line">            <span class="keyword">if</span>(x == n - <span class="number">1</span> &amp;&amp; y == n - <span class="number">1</span>) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> d : dir)&#123;</span><br><span class="line">                <span class="keyword">int</span> xs = x + d[<span class="number">0</span>], ys = y + d[<span class="number">1</span>];</span><br><span class="line">                <span class="keyword">if</span>(xs &gt;= <span class="number">0</span> &amp;&amp; xs &lt; n &amp;&amp; ys &gt;= <span class="number">0</span> &amp;&amp; ys &lt; n &amp;&amp; !visited[xs][ys])&#123;	<span class="comment">//判断边界</span></span><br><span class="line">                    visited[xs][ys] = <span class="number">1</span>;</span><br><span class="line">                    bfs.emplace(xs, ys);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样就完成了这一道题。</p>
<h2 id="2-Couples-Holding-Hands"><a href="#2-Couples-Holding-Hands" class="headerlink" title="2. Couples Holding Hands"></a>2. Couples Holding Hands</h2><p>N couples sit in 2N seats arranged in a row and want to hold hands. We want to know the minimum number of swaps so that every couple is sitting side by side. A <em>swap</em> consists of choosing <strong>any</strong> two people, then they stand up and switch seats.</p>
<p>The people and seats are represented by an integer from <code>0</code> to <code>2N-1</code>, the couples are numbered in order, the first couple being <code>(0, 1)</code>, the second couple being <code>(2, 3)</code>, and so on with the last couple being <code>(2N-2, 2N-1)</code>.</p>
<p>The couples’ initial seating is given by <code>row[i]</code> being the value of the person who is initially sitting in the i-th seat.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: <span class="built_in">row</span> = [<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">3</span>]</span><br><span class="line">Output: <span class="number">1</span></span><br><span class="line">Explanation: We only need to swap the <span class="built_in">second</span> (<span class="built_in">row</span>[<span class="number">1</span>]) <span class="keyword">and</span> <span class="built_in">third</span> (<span class="built_in">row</span>[<span class="number">2</span>]) person.</span><br></pre></td></tr></table></figure>
<p><strong>Example 2:</strong></p>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">Input:</span> row = [<span class="number">3</span>, <span class="number">2</span>, <span class="number">0</span>, <span class="number">1</span>]</span><br><span class="line"><span class="symbol">Output:</span> <span class="number">0</span></span><br><span class="line"><span class="symbol">Explanation:</span> All couples are already seated side by side.</span><br></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ol>
<li><code>len(row)</code> is even and in the range of <code>[4, 60]</code>.</li>
<li><code>row</code> is guaranteed to be a permutation of <code>0...len(row)-1</code>.</li>
</ol>
<h3 id="解法（伪）"><a href="#解法（伪）" class="headerlink" title="解法（伪）"></a>解法（伪）</h3><p>在这道题目中，有许多对couple，他们是(0, 1), (2, 3), …, (2n-2, 2n-1)。现在它们的顺序被打乱了，而你可以随即调换元素的位置，你需要找到调换次数最少的方案。</p>
<p>我的做法是简单的在判断两个元素不是一对couple后，往后查找它的couple并替换，同时调换次数增加一次。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSwapsCouples</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; row)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> swap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row.size() - <span class="number">1</span>; i += <span class="number">2</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(row[i] % <span class="number">2</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(row[i + <span class="number">1</span>] != row[i] - <span class="number">1</span>)&#123;</span><br><span class="line">                swap++;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">2</span>; j &lt; row.size(); j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(row[j] == row[i] - <span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="keyword">int</span> temp = row[j];</span><br><span class="line">                        row[j] = row[i + <span class="number">1</span>];</span><br><span class="line">                        row[i + <span class="number">1</span>] = temp;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(row[i + <span class="number">1</span>] != row[i] + <span class="number">1</span>)&#123;</span><br><span class="line">                swap++;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">2</span>; j &lt; row.size(); j++)&#123;</span><br><span class="line">                    <span class="keyword">if</span>(row[j] == row[i] + <span class="number">1</span>)&#123;</span><br><span class="line">                        <span class="keyword">int</span> temp = row[j];</span><br><span class="line">                        row[j] = row[i + <span class="number">1</span>];</span><br><span class="line">                        row[i + <span class="number">1</span>] = temp;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> swap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>你以为这样就结束了吗？</p>
<h3 id="cyclic-swapping"><a href="#cyclic-swapping" class="headerlink" title="cyclic swapping"></a>cyclic swapping</h3><p>上面的解法是在循环中嵌套一个循环，效果显然是不行的，通过leetcode的discuss，我学到了一种更为优秀的解法：cyclic swapping。</p>
<p>这个解法的精华在于：<code>i == ptn[pos[ptn[row[i]]]]</code>，乍一看确实毫无头绪，但要首先了解两个额外设置的数组<code>ptn</code>和<code>pos</code>：</p>
<ol>
<li><code>ptn[i]</code>指的是标签i的couple的值（i可以是位置也可以是具体的值）—— 若i为偶数，<code>ptn[i] = i + 1</code>，若i为奇数，<code>ptn[i] = i - 1</code>。</li>
<li><code>pos[i]</code>指的是标签i在row数组（也就是给定的随机数组）中的index —— <code>row[pos[i]] == i</code>。</li>
</ol>
<p>这样一来，<code>i == ptn[pos[ptn[row[i]]]]</code>的意思就是：</p>
<ol>
<li>在位置i上的元素有值<code>row[i]</code>，我们想把它放在它couple的旁边。</li>
<li>首先找到它的couple的值，也就是<code>ptn[row[i]]</code>。</li>
<li>接着找到这个couple的位置，也就是<code>pos[ptn[row[i]]]</code>。</li>
<li>最后找到这个位置旁的位置，也就是<code>ptn[pos[ptn[row[i]]]]</code>。</li>
</ol>
<p>接着就可以进行调换了：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minSwapsCouples</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; row)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> res = <span class="number">0</span>, N = row.size();</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; ptn(N, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pos(N, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        ptn[i] = (i % <span class="number">2</span> == <span class="number">0</span> ? i + <span class="number">1</span> : i - <span class="number">1</span>);</span><br><span class="line">        pos[row[i]] = i;</span><br><span class="line">    &#125;<span class="comment">//初始化</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = ptn[pos[ptn[row[i]]]]; i != j; j = ptn[pos[ptn[row[i]]]]) &#123;</span><br><span class="line">            swap(row[i], row[j]);</span><br><span class="line">            swap(pos[row[i]], pos[row[j]]);</span><br><span class="line">            res++;	<span class="comment">//调换次数</span></span><br><span class="line">        &#125;	<span class="comment">//这里的循环实际上只是完成一个位置的调换，如果这里的循环多于一次，后面的循环次数会减少</span></span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/13/leetcode240/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/13/leetcode240/" class="post-title-link" itemprop="url">leetcode 240 二维矩阵查值 题解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-13 22:20:11" itemprop="dateCreated datePublished" datetime="2018-09-13T22:20:11+08:00">2018-09-13</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-19 22:03:36" itemprop="dateModified" datetime="2018-09-19T22:03:36+08:00">2018-09-19</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><p>Write an efficient algorithm that searches for a value in an <em>m</em> x <em>n</em> matrix. This matrix has the following properties:</p>
<ul>
<li>Integers in each row are sorted in ascending from left to right.</li>
<li>Integers in each column are sorted in ascending from top to bottom.</li>
</ul>
<p><strong>Example:</strong></p>
<p>Consider the following matrix:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  [<span class="number">1</span>,   <span class="number">4</span>,  <span class="number">7</span>, <span class="number">11</span>, <span class="number">15</span>],</span><br><span class="line">  [<span class="number">2</span>,   <span class="number">5</span>,  <span class="number">8</span>, <span class="number">12</span>, <span class="number">19</span>],</span><br><span class="line">  [<span class="number">3</span>,   <span class="number">6</span>,  <span class="number">9</span>, <span class="number">16</span>, <span class="number">22</span>],</span><br><span class="line">  [<span class="number">10</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">17</span>, <span class="number">24</span>],</span><br><span class="line">  [<span class="number">18</span>, <span class="number">21</span>, <span class="number">23</span>, <span class="number">26</span>, <span class="number">30</span>]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>Given target = <code>5</code>, return <code>true</code>.</p>
<p>Given target = <code>20</code>, return <code>false</code>.</p>
<h3 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h3><p>拿到题目一看是查询类的，先暴力解了再说，解法就是两层循环遍历找到值。实现如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">searchMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(matrix.empty() || matrix[<span class="number">0</span>].empty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; matrix.size(); i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; matrix[i].size(); j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(matrix[i][j] == target)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>容易看出，这样做的复杂度达到了O(m*n)（m、n对应矩阵的行和列），肯定是不能够让人满意的。</p>
<h3 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h3><p>接下来有哪些地方可以改进的呢？注意这个二维矩阵，暴力求解的时候对每一行是直接顺序扫描，那么这里可以改成对一行进行二分查找，这样一来复杂度可以减少到O(m*logn)，实现如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">bisearch</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; line, <span class="keyword">int</span> head, <span class="keyword">int</span> tail, <span class="keyword">int</span> target)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> mid = line[(head + tail) / <span class="number">2</span>];</span><br><span class="line">    <span class="keyword">if</span>(head == tail)&#123;</span><br><span class="line">        <span class="keyword">return</span> mid == target;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mid == target)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(mid &lt; target)&#123;</span><br><span class="line">        <span class="keyword">return</span> bisearch(line, (head + tail) / <span class="number">2</span> + <span class="number">1</span>, tail, target);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bisearch(line, head, (head + tail) / <span class="number">2</span>, target);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">searchMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(matrix.empty() || matrix[<span class="number">0</span>].empty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; matrix.size(); i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(matrix[i].size() == <span class="number">1</span> &amp;&amp; matrix[i][<span class="number">0</span>] == target)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(target &gt; matrix[i][matrix[i].size() - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span>(target &lt; matrix[i][<span class="number">0</span>]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">if</span>(bisearch(matrix[i], <span class="number">0</span>, matrix[i].size() - <span class="number">1</span>, target))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="解法三"><a href="#解法三" class="headerlink" title="解法三"></a>解法三</h3><p>按照上一个解法提交后我发现成绩还是不尽人意（运行时间在所有成功提交中在中间的位置），那么还能怎么改进呢？思考了许久后，我发现是自己一开始就陷入思维定势了，因为这道题类型属于divide and conquer，所以就一直想着二分，其实并不一定要这么做。</p>
<p>重点是要分析透彻这个矩阵的特点，它的每一行、列的元素都是按从小到大的顺序排列好的，所以每个元素的左边元素都比它小，下面元素都比它大，那么只需要从第一行最右元素开始比较，若比target小就向下移动一位（这一行剩下的不需要查找了），若比target大就向左移动一位，这样若矩阵中存在target那么肯定能够找到。其实从最后一行第一个元素开始也可以，原理是一样的。</p>
<p>实现如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">searchMatrix</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; matrix, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(matrix.empty() || matrix[<span class="number">0</span>].empty()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, j = matrix[<span class="number">0</span>].size() - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(j &gt;= <span class="number">0</span> &amp;&amp; i &lt; matrix.size())&#123;</span><br><span class="line">        <span class="keyword">if</span>(matrix[i][j] == target)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(matrix[i][j] &gt; target)&#123;</span><br><span class="line">            j--;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>值得一提的是，这样完成的复杂度最差情况下为O(m+n)。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://Krazymud.github.io/2018/09/09/vbox-cfg/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eadric"/>
      <meta itemprop="description" content="Eadric的博客"/>
      <meta itemprop="image" content="/images/avatar.jpg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="EadBlog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/09/vbox-cfg/" class="post-title-link" itemprop="url">Win10环境下安装配置VirtualBox，搭建CentOS私有云</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-09 10:49:50" itemprop="dateCreated datePublished" datetime="2018-09-09T10:49:50+08:00">2018-09-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-12 16:38:36" itemprop="dateModified" datetime="2018-09-12T16:38:36+08:00">2018-09-12</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>友情链接：</p>
<ol>
<li><a href="https://palette25.github.io/2018/09/08/Serive-Computing-Install-Personal-Cloud/" target="_blank" rel="noopener">Win10环境下搭建Ubuntu私有云</a></li>
<li><a href="https://blog.chenmt.science/2018/09/09/77/" target="_blank" rel="noopener">MAC环境下搭建Ubuntu私有云</a></li>
</ol>
<p>（同队队员的博客，给有需要在windows、mac环境下搭建Ubuntu虚拟机的同学）</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>安装VirtualBox，根据自己的需要下载相应的host版本，在这里我下载的是VirtualBox 5.2.18的Windows host版，下载地址：<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">官网</a></li>
<li>安装Git客户端（git bash），下载地址：<a href="https://git-scm.com/downloads/" target="_blank" rel="noopener">官网</a></li>
<li>下载Linux发行版镜像，可以选择在阿里云<a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">opsx</a>进行下载，在这里我选择的是CentOS7镜像进行下载。</li>
</ol>
<h2 id="配置VirtualBox"><a href="#配置VirtualBox" class="headerlink" title="配置VirtualBox"></a>配置VirtualBox</h2><p>在创建安装虚拟机之前，要先配置虚拟机的存储位置，避免占用不必要的空间。</p>
<ul>
<li>VirtualBox菜单：管理 → 全局设定 → 常规 → 默认虚拟电脑位置</li>
</ul>
<p>之后要创建虚拟机内部虚拟网络，是将来用来测试虚拟机与主机间通讯时要用到的。</p>
<ul>
<li>VirtualBox菜单：管理 → 主机网络管理器</li>
</ul>
<p>将网卡改为手动配置，自行修改Ipv4地址，注意这个地址是作为虚拟内部网络host的地址，后续虚拟机的ip地址不能与之相同。</p>
<p>配置界面：</p>
<p><img src="/2018/09/09/vbox-cfg/1.png" alt="配置界面"></p>
<p>配置网络完成后，在主机windows命令行输入ipconfig，可以看到我们创建的网卡的信息。</p>
<p><img src="/2018/09/09/vbox-cfg/2.png" alt="网卡信息"></p>
<h2 id="配置CentOS虚拟机"><a href="#配置CentOS虚拟机" class="headerlink" title="配置CentOS虚拟机"></a>配置CentOS虚拟机</h2><p>首先用vbox创建一个64 bit虚拟机，命名为centos-base，以便与后面另外创建的虚拟机区分。因为对于这个虚拟机计划只使用命令行操作，所以CPU、内存、显存都采用默认配置就可以，存储设置为30G，避免以后扩展麻烦。</p>
<p>比较重要的是网络的配置：</p>
<ul>
<li>设置 → 网络</li>
</ul>
<p>第一块网卡设置为NAT（不用调整），这块网卡负责访问外网（通过宿主机）。第二块网卡连接方式：Host-Only，接口为之前创建的虚拟网卡VirtualBox Host-Only Ethernet Adapter #2，这块网卡负责进行虚拟网络连接。</p>
<p>之后导入之前下载的iso文件进行系统安装，完成后进入系统。</p>
<p>进入系统后，第一件事要升级OS系统内核：</p>
<ul>
<li><p>首先获取wget，<code>yum install wget</code></p>
</li>
<li><p>系统自带的源可能比较慢，可以换成163或阿里云的源，这里选择<a href="http://mirrors.163.com/.help/centos.html" target="_blank" rel="noopener">163源</a>进行更换：</p>
<ul>
<li><p>首先备份/etc/yum.repos.d/CentOS-Base.repo</p>
<p><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code></p>
</li>
<li><p>下载对应版本repo文件（这里为CentOS7），并放入/etc/yum.repos.d</p>
<p><code>wget http://mirrors.163.com/.help/CentOS7-Base-163.repo</code></p>
</li>
<li><p>运行以下命令生成缓存</p>
<p><code>yum clean all</code></p>
<p><code>yum makecache</code></p>
</li>
</ul>
</li>
<li><p>最后 <code>yum update</code></p>
</li>
</ul>
<p>接着检查网卡配置，命令行输入nmtui，出现配置网卡的界面：</p>
<p><img src="/2018/09/09/vbox-cfg/3.png" alt="配置网卡"></p>
<p>进入Edit之后可以看到有enp0s8、enp0s3两个以太网连接，分别对应刚才的Host-Only和NAT。对于enp0s3不用如何调整，只需要在enp0s8的edit界面设置ipv4地址：</p>
<p><img src="/2018/09/09/vbox-cfg/4.png" alt="enp0s8"></p>
<p>设置好了不要忘记在activate界面手动激活网卡，因为这里默认开机时不会启动网卡。当然，也可以设置它开机时自动启动。找到网卡的配置文件（在/etc/sysconfig/network-scripts中），将ifcfg-enp0s8和ifcfg-enp0s3（名称对应你的网卡名称）中的ONBOOT选项都改为true，这样就能开机自启了。</p>
<p>接下来尝试ping外网与内网：</p>
<p><img src="/2018/09/09/vbox-cfg/5.png" alt="fail"></p>
<p>咦，为什么内网无法ping到？网卡的设置应该是没有问题的，同时我试了一下在windows这边命令行ping 192.168.106.50，也就是虚拟机地址，是没有问题的，说明应该是有一个协议使得连接只能是单向的了，那就应该是windows防火墙的问题了，win10防火墙有三种：域网络、专用网络和公共网络。关闭win10的专用网络防火墙后，果然可以了：</p>
<p><img src="/2018/09/09/vbox-cfg/6.png" alt="ok"></p>
<p>下面开始配置第二个CentOS虚拟机，这个虚拟机只需要对centos-base进行复制就可以了，这里把新的虚拟机命名为centos-client，注意复制选项，必须选择重新初始化所有网卡的MAC地址，不然后面无法测试虚拟机之间的通信（地址相同）。最后选择<strong>链接复制</strong>，此时新虚拟机的虚拟硬盘是绑定到原虚拟机的虚拟硬盘的，这样虚拟机创建的就很快。</p>
<p>同样，在第二个虚拟机中，用nmtui配置主机名与第二块网卡的地址，并测试能否ping通，测试结果都很正常。</p>
<p>在这个虚拟机中打算使用centos 桌面，故分配给它的CPU、内存与显存都要调高一些，并使用<code>yum groupinstall &quot;GNOME Desktop&quot;</code>来安装桌面，安装成功后，设置启动目标为桌面：<code>ln -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target</code>，再重启，就可以看到centos桌面了：</p>
<p><img src="/2018/09/09/vbox-cfg/7.png" alt="centos"></p>
<h2 id="ssh与远程桌面访问"><a href="#ssh与远程桌面访问" class="headerlink" title="ssh与远程桌面访问"></a>ssh与远程桌面访问</h2><p>既然是建立私有云，用ssh和远程桌面访问是必不可少的。而要使用这两个工具也需要做一些工作。</p>
<p>首先对于ssh：</p>
<ul>
<li><p>确保CentOS7安装了openssh-server，在终端输入<code>yum list installed | grep openssh-server</code></p>
</li>
<li><p>如果显示没有安装，就输入<code>yum install openssh-server</code>来安装</p>
</li>
<li><p>有了openssh-server后，找到/etc/ssh/目录下的sshd_config文件并用编辑器打开，将Port、ListenAddress前的＃号去除，并把PermitRootLogin和PasswordAuthentication设为yes</p>
<p><img src="/2018/09/09/vbox-cfg/8.png" alt="8"></p>
<p><img src="/2018/09/09/vbox-cfg/9.png" alt="9"></p>
<p><img src="/2018/09/09/vbox-cfg/10.png" alt="10"></p>
</li>
</ul>
<p>测试ssh连接成功：</p>
<p><img src="/2018/09/09/vbox-cfg/11.png" alt="ssh2"></p>
<p>接下来是远程桌面访问：</p>
<ul>
<li><p>首先要安装VirtualBox远程显示系统的扩展包<a href="https://www.virtualbox.org/wiki/Downloads" target="_blank" rel="noopener">Oracle VM VirtualBox Extension pack</a>，它提供一系列的功能支持：USB 2.0，intel网卡的PXE启动与VirtualBox远程显示系统。安装完成后，重启宿主机。</p>
</li>
<li><p>设置虚拟机访问端口：点击虚拟机设置 → 显示 → 远程桌面 → 启用服务器并设置连接端口，注意连接时用的是宿主机的IP地址加上子机的端口（也就是192.168.106.1:（设置的端口）），每台虚拟机必须拥有唯一的RDP访问端口。</p>
</li>
<li><p>最后，用Windows的Remote Desktop Connection（远程桌面连接）终端进行远程桌面访问（注意先启动虚拟机）</p>
<p><img src="/2018/09/09/vbox-cfg/12..png" alt="rdc"></p>
<p><img src="/2018/09/09/vbox-cfg/13.png" alt="ssh2"></p>
</li>
</ul>
<p>这样以来，私有云就搭建好了，可以开始愉快的玩耍了~</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Eadric"/>
            
              <p class="site-author-name" itemprop="name">Eadric</p>
              <div class="site-description motion-element" itemprop="description">Eadric的博客</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">26</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">4</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eadric</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>
















  
  











  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/three/three.min.js"></script>

  
  <script src="/lib/three/three-waves.min.js"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.1"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
